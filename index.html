<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸŽ¬ Tollywood Dialogue Quiz</title>
<style>
body { font-family: Arial, sans-serif; color: #fff; margin:0; padding:0; display:flex; justify-content:center; align-items:center; min-height:100vh; background-color:#111; transition: background-image 1s; background-size:cover; background-position:center; }
.container { background: rgba(0,0,0,0.85); padding:30px; border-radius:15px; box-shadow:0 10px 30px rgba(0,0,0,0.5); width:100%; max-width:700px; text-align:center; }
h1 { color:#ffc107; margin-bottom:20px; font-size:2em; text-shadow:1px 1px 2px #000; }
button { background-color:#ffc107; color:#333; padding:10px 20px; border:none; border-radius:6px; cursor:pointer; font-weight:bold; margin:5px; transition:0.3s; }
button:hover { background-color:#e0a800; }
.option-button { display:block; width:100%; margin-bottom:10px; padding:15px; background-color:#444; color:white; border:1px solid #666; text-align:left; transition:0.2s; cursor:pointer; }
#dialogue-display { background-color: rgba(255,255,255,0.1); padding:15px; margin-bottom:10px; border-radius:10px; border:1px solid #ffc107; font-size:1.2em; font-style:italic; text-shadow:1px 1px 3px #000; display:none; }
#hint-box { margin-top:20px; padding:15px; border:1px dashed #17a2b8; background-color: rgba(23,162,184,0.2); color:#17a2b8; border-radius:8px; text-align:left; display:none; }
.feedback-message { margin-top:15px; font-weight:bold; font-size:1.2em; transition:0.5s; }
.correct { color:#28a745; }
.incorrect { color:#dc3545; }
#progress { margin-bottom:15px; font-size:1em; }
#next-button { display:none; margin-top:10px; }
#score-box { margin-top:10px; font-size:1.1em; color:#17a2b8; }
#hint-button { margin-top:10px; }
</style>
</head>
<body>

<div class="container">
<h1>ðŸŽ¬ Tollywood Dialogue Quiz</h1>
<div id="progress"></div>
<div id="dialogue-display"></div>
<div id="options-container"></div>
<div class="feedback-message" id="quiz-feedback"></div>
<button id="hint-button" onclick="showHint()">ðŸ’¡ Get Hint</button>
<div id="hint-box"><strong>Hint:</strong> <span id="hint-text"></span></div>
<button id="next-button" onclick="nextQuestion()">âž¡ Next</button>
<div id="score-box"></div>
<div id="hint-remaining">Hints remaining: 6</div>
</div>

<script>
const movieData = {
"pokiri": {dialogue:"Evadu Kodite Dimma Tirigi Mind Block Ayipoddo Aade Pandu Gaadu", correctAnswer:"Pokiri", incorrectOptions:["Businessman","Okkadu","Jalsa"], hint:"Hero: Mahesh Babu. Directed by Puri Jagannadh.", bg:"https://images.unsplash.com/photo-1557683316-922659132204?fit=crop&w=1280&h=800"},
"idiot": {dialogue:"City ki entho mandi commissioner lu vastharu potharu, Chantti Gadu yeppudu ikkade untadu, Chantti Gadu Local!", correctAnswer:"Idiot", incorrectOptions:["Amma Nanna O Tamila Ammayi","Chanti","Neninthe"], hint:"Hero: Ravi Teja. Directed by Puri Jagannadh.", bg:"https://images.unsplash.com/photo-1522075782449-6f90d1f4d92e?fit=crop&w=1280&h=800"},
"jalsa": {dialogue:"Yuddhamlo Gelavadam Ante Santruvuni Odinchadam, Champadam Kaadu", correctAnswer:"Jalsa", incorrectOptions:["Gudumba Shankar","Attarintiki Daredi","Kushi"], hint:"Hero: Pawan Kalyan. Directed by Trivikram Srinivas.", bg:"https://images.unsplash.com/photo-1533411075677-74846433e547?fit=crop&w=1280&h=800"},
"simha": {dialogue:"Chudu Oka Vaipe Chudu Inko Vaipu Chudalanukoku Tattukolevu", correctAnswer:"Simha", incorrectOptions:["Chennakesava Reddy","Adhinayakudu","Narasimha Naidu"], hint:"Hero: Nandamuri Balakrishna. Directed by Boyapati Srinu.", bg:"https://images.unsplash.com/photo-1542838686-21f8a85f2618?fit=crop&w=1280&h=800"},
"indra": {dialogue:"Veera Shankar Reddyâ€¦ Mokke Kada Ani Peekeste Peeka Kostaa", correctAnswer:"Indra", incorrectOptions:["Tagore","Snehamante Idera","Mrugaraju"], hint:"Hero: Chiranjeevi. Directed by B. Gopal.", bg:"https://images.unsplash.com/photo-1627916962253-1574d39a319d?fit=crop&w=1280&h=800"},
"legend": {dialogue:"Flute Jinka Mundu Oodu Simham Mundu Kaadu", correctAnswer:"Legend", incorrectOptions:["Simha","Samarasimha Reddy","Gautamiputra Satakarni"], hint:"Hero: Nandamuri Balakrishna. Directed by Boyapati Srinu.", bg:"https://images.unsplash.com/photo-1549488313-138981e85f02?fit=crop&w=1280&h=800"},
"rrr": {dialogue:"Thongi thongi nakki nakke kaadu. Tokkuntu povali. Eduru vachinodini aeskuntu povali", correctAnswer:"RRR", incorrectOptions:["Bahubali","KGF","Salaar"], hint:"Directed by S.S. Rajamouli. Features N.T. Rama Rao Jr. and Ram Charan.", bg:"https://images.unsplash.com/photo-1635549348485-f8620d2b3d23?fit=crop&w=1280&h=800"},
"bahubali": {dialogue:"Jai Mahishmati", correctAnswer:"Bahubali", incorrectOptions:["RRR","KGF","Salaar"], hint:"Directed by S.S. Rajamouli. Starring Prabhas and Rana Daggubati.", bg:"https://images.unsplash.com/photo-1554387106-2d0c89b3d8d3?fit=crop&w=1280&h=800"},
"kgf": {dialogue:"Violence loves company.", correctAnswer:"KGF", incorrectOptions:["RRR","Bahubali","Salaar"], hint:"Directed by Prashanth Neel. Starring Yash.", bg:"https://images.unsplash.com/photo-1591195852387-6d0d2372fa22?fit=crop&w=1280&h=800"},
"salaar": {dialogue:"Power is not given, it is taken.", correctAnswer:"Salaar", incorrectOptions:["RRR","Bahubali","KGF"], hint:"Directed by Prashanth Neel. Starring Prabhas.", bg:"https://images.unsplash.com/photo-1647389861030-97a3c7b5e91b?fit=crop&w=1280&h=800"},
"pushpa": {dialogue:"World Fire", correctAnswer:"Pushpa", incorrectOptions:["RRR","KGF","Salaar"], hint:"Hero: Allu Arjun. Directed by Sukumar.", bg:"https://images.unsplash.com/photo-1631259069180-1c0a7b8ffea6?fit=crop&w=1280&h=800"},
"julayi": {dialogue:"Aasha cancer unnavadini kuda brathikisthundi.. Bhayam ulcer unnavadini kuda champesthundi.", correctAnswer:"Julayi", incorrectOptions:["RRR","KGF","Salaar"], hint:"Hero: Allu Arjun. Directed by Trivikram Srinivas.", bg:"https://images.unsplash.com/photo-1610617458910-d4b8b8a988fa?fit=crop&w=1280&h=800"}
};

let questions = Object.values(movieData);
let currentIndex = 0;
let score = 0;
let quizAttempted = false;
let hintsUsed = 0;
const maxHints = 6;
let utterance;

function startQuiz() {
    shuffleArray(questions);
    currentIndex = 0;
    score = 0;
    hintsUsed = 0;
    showQuestion();
    updateScore();
    updateHintRemaining();
}

function showQuestion() {
    quizAttempted = false;
    const q = questions[currentIndex];
    document.body.style.backgroundImage = `url('${q.bg}')`;
    document.getElementById('dialogue-display').style.display='none';
    document.getElementById('quiz-feedback').textContent='';
    document.getElementById('hint-box').style.display='none';
    document.getElementById('hint-button').disabled = hintsUsed >= maxHints;
    document.getElementById('next-button').style.display='none';
    document.getElementById('hint-text').textContent = q.hint;

    const allOptions = [q.correctAnswer, ...q.incorrectOptions];
    renderOptions(shuffleArray(allOptions));
    playDialogue();
    updateProgress();
}

function renderOptions(options) {
    const container = document.getElementById('options-container');
    container.innerHTML='';
    options.forEach(opt=>{
        const btn = document.createElement('button');
        btn.className='option-button';
        btn.textContent = opt;
        btn.onclick = () => checkAnswer(opt);
        container.appendChild(btn);
    });
}

function checkAnswer(selected){
    if(quizAttempted) return;
    quizAttempted=true;
    const q = questions[currentIndex];
    const feedback = document.getElementById('quiz-feedback');
    const dialogueDiv = document.getElementById('dialogue-display');
    dialogueDiv.style.display='block';
    dialogueDiv.textContent = q.dialogue;

    document.querySelectorAll('.option-button').forEach(btn=>{
        btn.disabled = true;
        if(btn.textContent === q.correctAnswer){
            btn.style.backgroundColor='#28a745';
            btn.style.color='white';
        }
    });

    if(selected === q.correctAnswer){
        feedback.textContent="Correct! ðŸŽ‰";
        feedback.className='feedback-message correct';
        score++;
        updateScore();
    } else{
        feedback.textContent="Incorrect âŒ";
        feedback.className='feedback-message incorrect';
    }
    document.getElementById('next-button').style.display='inline-block';
}

function showHint(){
    if(hintsUsed >= maxHints) return;
    document.getElementById('hint-box').style.display='block';
    hintsUsed++;
    updateHintRemaining();
    if(hintsUsed >= maxHints) document.getElementById('hint-button').disabled=true;
    speakText(questions[currentIndex].hint);
}

function nextQuestion(){
    currentIndex++;
    if(currentIndex >= questions.length){
        alert(`Quiz finished! Your score: ${score}/${questions.length}`);
        startQuiz();
    } else{
        showQuestion();
    }
}

function updateProgress(){
    document.getElementById('progress').textContent = `Question ${currentIndex+1} of ${questions.length}`;
}

function updateScore(){
    document.getElementById('score-box').textContent = `Score: ${score}`;
}

function updateHintRemaining(){
    document.getElementById('hint-remaining').textContent = `Hints remaining: ${maxHints - hintsUsed}`;
}

function playDialogue(){
    speakText(questions[currentIndex].dialogue);
}

function speakText(text){
    if(utterance) speechSynthesis.cancel();
    utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = 'te-IN';
    const voices = speechSynthesis.getVoices();
    utterance.voice = voices.find(v=>v.lang==='te-IN') || voices[0];
    speechSynthesis.speak(utterance);
}

function shuffleArray(arr){
    for(let i=arr.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [arr[i],arr[j]]=[arr[j],arr[i]];
    }
    return arr;
}

window.onload = startQuiz;
</script>

</body>
</html>
